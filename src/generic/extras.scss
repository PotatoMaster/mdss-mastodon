@mixin generic-extras {
  $counters: "";

  @for $level from 1 through length($numbered-headings) {
    $heading: nth($numbered-headings, $level);
    $counters: #{$counters} #{$heading};

    $counter-resets: "";
    @if $level < length($numbered-headings) {
      @for $i from $level + 1 through length($numbered-headings) {
        $counter-resets: #{$counter-resets} #{nth($numbered-headings, $i)}
      }
    }

    $label: "";
    @for $i from 1 through $level {
      $label: #{$label} counter(#{nth($numbered-headings, $i)});
      @if ($i != $level) {
        $label: #{$label} '"."'
      } @else {
        $label: #{$label} '"\00a0"'
      }
    }

    #{$heading} {
      position: relative;
      counter-increment: #{$heading};
      counter-reset: #{$counter-resets};
    }

    #{$heading}:before {
      @include on-left-margin {
        content: #{$label};
      }
    }
  }

  @each $element in $numbered-elements {
    $counters: #{$counters} #{$element};

    #{$element} {
      position: relative;
      counter-increment: #{$element};
    }

    #{$element}:before {
      @include on-right-margin {
        content: "(" counter(#{$element}) ")";
      }
    }
  }

  @include on-root {
    counter-reset: #{$counters};
  }
}